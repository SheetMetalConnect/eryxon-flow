
> vite_react_shadcn_ts@0.0.0 test
> vitest --run


[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90m/Users/vanenkhuizen/Documents/GitHub/eryxon-flow[39m

 [31mâ¯[39m src/lib/searchService.test.ts [2m([22m[2m30 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[32m 98[2mms[22m[39m
       [32mâœ“[39m converts single word to prefix search[32m 1[2mms[22m[39m
       [32mâœ“[39m converts multiple words to AND query with prefix search[32m 0[2mms[22m[39m
       [32mâœ“[39m handles mixed case input[32m 0[2mms[22m[39m
       [32mâœ“[39m removes special characters[32m 0[2mms[22m[39m
       [32mâœ“[39m handles numbers[32m 0[2mms[22m[39m
       [32mâœ“[39m handles empty string[32m 0[2mms[22m[39m
       [32mâœ“[39m handles whitespace only[32m 0[2mms[22m[39m
       [32mâœ“[39m handles extra whitespace between words[32m 0[2mms[22m[39m
       [32mâœ“[39m handles leading and trailing whitespace[32m 0[2mms[22m[39m
       [32mâœ“[39m filters out single special characters[32m 0[2mms[22m[39m
       [32mâœ“[39m handles realistic job searches[32m 0[2mms[22m[39m
       [32mâœ“[39m handles part number searches[32m 0[2mms[22m[39m
       [32mâœ“[39m handles customer name searches[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m returns empty array for empty query[39m[32m 94[2mms[22m[39m
[31m       [31mÃ—[31m returns empty array for whitespace query[39m[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m returns empty array for empty query[39m[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m returns empty array for empty query[39m[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m returns empty array for empty query[39m[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m returns empty array for empty query[39m[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m returns empty array for empty query[39m[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m returns empty array for empty tenantId[39m[32m 0[2mms[22m[39m
[31m       [31mÃ—[31m returns empty array for whitespace query[39m[32m 0[2mms[22m[39m
       [32mâœ“[39m formats job results correctly[32m 0[2mms[22m[39m
       [32mâœ“[39m formats part results with job info[32m 0[2mms[22m[39m
       [32mâœ“[39m formats operation results with part and cell info[32m 0[2mms[22m[39m
       [32mâœ“[39m formats user results with role info[32m 0[2mms[22m[39m
       [32mâœ“[39m formats issue results with severity info[32m 0[2mms[22m[39m
     [32mâœ“[39m default limit is 10[32m 0[2mms[22m[39m
     [32mâœ“[39m supports custom limit[32m 0[2mms[22m[39m
     [32mâœ“[39m supports fuzzy matching option[32m 0[2mms[22m[39m
TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/useJobIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at commitRootImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
[90mstderr[2m | src/hooks/useJobIssues.test.ts[2m > [22m[2museJobIssues[2m > [22m[2mfetches issue summary for job
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/useJobIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at commitRootImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
[90mstderr[2m | src/hooks/useJobIssues.test.ts[2m > [22m[2museJobIssues[2m > [22m[2mcalls RPC with correct parameters
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/usePartIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at commitRootImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
[90mstderr[2m | src/hooks/usePartIssues.test.ts[2m > [22m[2musePartIssues[2m > [22m[2mfetches issue summary for part
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/usePartIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at commitRootImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
[90mstderr[2m | src/hooks/usePartIssues.test.ts[2m > [22m[2musePartIssues[2m > [22m[2mcalls RPC with correct parameters
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/useJobIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at commitRootImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
[90mstderr[2m | src/hooks/useJobIssues.test.ts[2m > [22m[2museJobIssues[2m > [22m[2mhandles empty data response
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/usePartIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at commitRootImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
[90mstderr[2m | src/hooks/usePartIssues.test.ts[2m > [22m[2musePartIssues[2m > [22m[2mhandles empty data response
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/useJobIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at commitRootImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
[90mstderr[2m | src/hooks/useJobIssues.test.ts[2m > [22m[2museJobIssues[2m > [22m[2mhandles error response
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

[90mstderr[2m | src/hooks/useQRMMetrics.test.tsx[2m > [22m[2museCellQRMMetrics[2m > [22m[2mhandles error from RPC
[22m[39m[4:26:01 PM] [ERROR] [useCellQRMMetrics] Failed to fetch cell QRM metrics {
  operation: [32m'useCellQRMMetrics'[39m,
  entityType: [32m'cell'[39m,
  entityId: [32m'cell-1'[39m,
  tenantId: [32m'tenant-1'[39m
}
Error: RPC error
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/useQRMMetrics.test.tsx:94:14
    at file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@vitest/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@vitest/runner/dist/index.js:1206:10)
    at file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@vitest/runner/dist/index.js:1650:37
    at Traces.$ (file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)
    at runTest (file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@vitest/runner/dist/index.js:1650:12)

TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/usePartIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at commitRootImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
[90mstderr[2m | src/hooks/usePartIssues.test.ts[2m > [22m[2musePartIssues[2m > [22m[2mhandles error response
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

 [32mâœ“[39m src/components/ui/button.test.tsx [2m([22m[2m31 tests[22m[2m)[22m[32m 176[2mms[22m[39m
TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/useJobIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at commitRootImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
[90mstderr[2m | src/hooks/useJobIssues.test.ts[2m > [22m[2museJobIssues[2m > [22m[2mconverts string counts to numbers
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/useJobIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25073:11)
    at commitPassiveUnmountEffects_complete (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25046:7)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25035:7)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26808:9
[90mstderr[2m | src/hooks/useJobIssues.test.ts[2m > [22m[2museJobIssues[2m > [22m[2mrefetches when jobId changes
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/useJobIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at performConcurrentWorkOnRoot (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25748:32)
[90mstderr[2m | src/hooks/useJobIssues.test.ts[2m > [22m[2museJobIssues[2m > [22m[2mrefetches when jobId changes
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/usePartIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at commitRootImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
[90mstderr[2m | src/hooks/usePartIssues.test.ts[2m > [22m[2musePartIssues[2m > [22m[2mconverts string counts to numbers
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/usePartIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25073:11)
    at commitPassiveUnmountEffects_complete (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25046:7)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25035:7)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26808:9
[90mstderr[2m | src/hooks/usePartIssues.test.ts[2m > [22m[2musePartIssues[2m > [22m[2mrefetches when partId changes
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/usePartIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at performConcurrentWorkOnRoot (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25748:32)
[90mstderr[2m | src/hooks/usePartIssues.test.ts[2m > [22m[2musePartIssues[2m > [22m[2mrefetches when partId changes
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

 [31mâ¯[39m src/hooks/usePartIssues.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 233[2mms[22m[39m
     [32mâœ“[39m returns default state when no partId[32m 8[2mms[22m[39m
[31m     [31mÃ—[31m fetches issue summary for part[39m[32m 57[2mms[22m[39m
[31m     [31mÃ—[31m calls RPC with correct parameters[39m[32m 3[2mms[22m[39m
[31m     [31mÃ—[31m handles empty data response[39m[32m 54[2mms[22m[39m
[31m     [31mÃ—[31m handles error response[39m[32m 54[2mms[22m[39m
[31m     [31mÃ—[31m converts string counts to numbers[39m[32m 53[2mms[22m[39m
[31m     [31mÃ—[31m refetches when partId changes[39m[32m 3[2mms[22m[39m
 [31mâ¯[39m src/hooks/usePendingIssuesCount.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 233[2mms[22m[39m
     [32mâœ“[39m returns isLoading initially[32m 8[2mms[22m[39m
     [32mâœ“[39m returns count of pending issues[32m 54[2mms[22m[39m
     [32mâœ“[39m returns 0 when no pending issues[32m 55[2mms[22m[39m
     [32mâœ“[39m handles null count gracefully[32m 54[2mms[22m[39m
[31m     [31mÃ—[31m queries with correct parameters[39m[32m 7[2mms[22m[39m
     [32mâœ“[39m throws error on fetch failure[32m 54[2mms[22m[39m
TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/useJobIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at commitRootImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
[90mstderr[2m | src/hooks/useJobIssues.test.ts[2m > [22m[2museJobIssues[2m > [22m[2mhandles all severity levels
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

 [32mâœ“[39m src/hooks/useQualityMetrics.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[33m 451[2mms[22m[39m
TypeError: __vite_ssr_import_1__.supabase.removeChannel is not a function
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/useJobIssues.ts:80:16
    at safelyCallDestroy (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
    at commitHookEffectListUnmount (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
    at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
    at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
    at commitPassiveUnmountEffects_begin (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
    at commitPassiveUnmountEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
    at flushPassiveEffectsImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
    at flushPassiveEffects (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
    at commitRootImpl (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
[90mstderr[2m | src/hooks/useJobIssues.test.ts[2m > [22m[2museJobIssues[2m > [22m[2mhandles null severity gracefully
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

 [31mâ¯[39m src/hooks/useJobIssues.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[33m 514[2mms[22m[39m
     [32mâœ“[39m returns default state when no jobId[32m 13[2mms[22m[39m
[31m     [31mÃ—[31m fetches issue summary for job[39m[32m 61[2mms[22m[39m
[31m     [31mÃ—[31m calls RPC with correct parameters[39m[32m 3[2mms[22m[39m
[31m     [31mÃ—[31m handles empty data response[39m[32m 53[2mms[22m[39m
[31m     [31mÃ—[31m handles error response[39m[32m 54[2mms[22m[39m
[31m     [31mÃ—[31m converts string counts to numbers[39m[32m 55[2mms[22m[39m
[31m     [31mÃ—[31m refetches when jobId changes[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m handles all severity levels[39m[32m 214[2mms[22m[39m
[31m     [31mÃ—[31m handles null severity gracefully[39m[32m 57[2mms[22m[39m
 [32mâœ“[39m src/hooks/useProductionMetrics.test.tsx [2m([22m[2m14 tests[22m[2m)[22m[33m 510[2mms[22m[39m
 [32mâœ“[39m src/components/admin/AdminPageHeader.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[32m 173[2mms[22m[39m
 [32mâœ“[39m src/hooks/useQRMMetrics.test.tsx [2m([22m[2m17 tests[22m[2m)[22m[33m 549[2mms[22m[39m
[90mstderr[2m | src/hooks/useOperationIssues.test.ts[2m > [22m[2museOperationIssues[2m > [22m[2mreturns loading state initially
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstderr[2m | src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2minitialization[2m > [22m[2mstarts in loading state
[22m[39mWarning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/contexts/AuthContext.tsx:10:25)
    at wrapper (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/contexts/AuthContext.test.tsx:111:24)

[90mstderr[2m | src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2minitialization[2m > [22m[2msets up auth state listener on mount
[22m[39mWarning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/contexts/AuthContext.tsx:10:25)
    at wrapper (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/contexts/AuthContext.test.tsx:111:24)

 [32mâœ“[39m src/hooks/useFileUpload.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 17[2mms[22m[39m
[90mstderr[2m | src/hooks/useSubscription.test.ts[2m > [22m[2museSubscription[2m > [22m[2merror handling[2m > [22m[2mhandles API errors gracefully
[22m[39mError fetching subscription: { message: [32m'API Error'[39m, code: [32m'500'[39m }

[90mstderr[2m | src/hooks/useSubscription.test.ts[2m > [22m[2museSubscription[2m > [22m[2mloading state[2m > [22m[2mstarts in loading state
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)
    at QueryClientProvider (file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at Wrapper (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/useSubscription.test.ts:82:31)

[90mstderr[2m | src/hooks/useSubscription.test.ts[2m > [22m[2museSubscription[2m > [22m[2mloading state[2m > [22m[2mstarts in loading state
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)
    at QueryClientProvider (file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at Wrapper (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/useSubscription.test.ts:82:31)

[90mstderr[2m | src/hooks/useSubscription.test.ts[2m > [22m[2museSubscription[2m > [22m[2mloading state[2m > [22m[2mstarts in loading state
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)
    at QueryClientProvider (file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)
    at Wrapper (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/hooks/useSubscription.test.ts:82:31)

 [32mâœ“[39m src/hooks/useSubscription.test.ts [2m([22m[2m18 tests[22m[2m)[22m[33m 923[2mms[22m[39m
[90mstderr[2m | src/hooks/usePartImages.test.ts[2m > [22m[2musePartImages[2m > [22m[2mgetImagePaths returns empty array on error
[22m[39mError fetching image paths: Error: Fetch error
    at [90m/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39msrc/hooks/usePartImages.test.ts:97:20
    at mockFrom [90m(file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39mnode_modules/[4m@vitest[24m/spy/dist/index.js:285:34[90m)[39m
    at Object.from [90m(/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39msrc/hooks/usePartImages.test.ts:11:31[90m)[39m
    at Object.getImagePaths [90m(/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39msrc/hooks/usePartImages.ts:22:10[90m)[39m
    at [90m/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39msrc/hooks/usePartImages.test.ts:107:36
    at [90m/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39mnode_modules/[4m@testing-library[24m/react/dist/act-compat.js:48:24
    at act [90m(/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39mnode_modules/[4mreact[24m/cjs/react.development.js:2512:16[90m)[39m
    at Proxy.act [90m(/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39mnode_modules/[4m@testing-library[24m/react/dist/act-compat.js:47:25[90m)[39m
    at [90m/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39msrc/hooks/usePartImages.test.ts:106:11
    at [90mfile:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11

 [32mâœ“[39m src/hooks/useOEEMetrics.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[33m 460[2mms[22m[39m
 [32mâœ“[39m src/hooks/usePartImages.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 27[2mms[22m[39m
 [32mâœ“[39m src/hooks/useOperationIssues.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 401[2mms[22m[39m
Error: useAuth must be used within an AuthProvider
    at Module.useAuth (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/contexts/AuthContext.tsx:241:11)
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/contexts/AuthContext.test.tsx:298:26
    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:331:27)
    at renderWithHooks (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:360:16)
    at invokeEventListeners (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:296:3)
Error: useAuth must be used within an AuthProvider
    at Module.useAuth (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/contexts/AuthContext.tsx:241:11)
    at /Users/vanenkhuizen/Documents/GitHub/eryxon-flow/src/contexts/AuthContext.test.tsx:298:26
    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:331:27)
    at renderWithHooks (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:360:16)
    at invokeEventListeners (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:296:3)
 [32mâœ“[39m src/contexts/AuthContext.test.tsx [2m([22m[2m14 tests[22m[2m)[22m[33m 361[2mms[22m[39m
 [32mâœ“[39m src/hooks/use-mobile.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mâœ“[39m src/hooks/useReliabilityMetrics.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[33m 499[2mms[22m[39m
 [32mâœ“[39m src/components/admin/PageStatsRow.test.tsx [2m([22m[2m17 tests[22m[2m)[22m[32m 64[2mms[22m[39m
 [32mâœ“[39m src/hooks/useInfiniteScroll.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 40[2mms[22m[39m
 [32mâœ“[39m src/hooks/useServerPagination.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/hooks/useResponsiveColumns.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32mâœ“[39m src/lib/utils.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32mâœ“[39m src/hooks/useDebounce.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90mstderr[2m | src/lib/webhooks.test.ts[2m > [22m[2mwebhooks[2m > [22m[2mtriggerWebhook[2m > [22m[2mreturns error when no active session
[22m[39mNo active session for webhook dispatch

[90mstderr[2m | src/lib/webhooks.test.ts[2m > [22m[2mwebhooks[2m > [22m[2mtriggerWebhook[2m > [22m[2mreturns error when dispatch fails
[22m[39mWebhook dispatch failed: { error: [32m'Dispatch failed'[39m }

[90mstderr[2m | src/lib/webhooks.test.ts[2m > [22m[2mwebhooks[2m > [22m[2mtriggerWebhook[2m > [22m[2mhandles network errors gracefully
[22m[39mError triggering webhook: Error: Network error
    at [90m/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39msrc/lib/webhooks.test.ts:186:39
    at [90mfile:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Users/vanenkhuizen/Documents/GitHub/eryxon-flow/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstderr[2m | src/lib/webhooks.test.ts[2m > [22m[2mwebhooks[2m > [22m[2mtriggerWebhook[2m > [22m[2mhandles non-Error exceptions
[22m[39mError triggering webhook: String error

 [32mâœ“[39m src/lib/webhooks.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m src/lib/validation/DataValidator.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mâœ“[39m src/hooks/use-toast.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m src/lib/validation/ValidationLogger.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mâœ“[39m src/lib/validation/EntityValidators.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32mâœ“[39m src/integrations/supabase/types.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 4[2mms[22m[39m
[90mstderr[2m | src/hooks/useNotifications.test.ts[2m > [22m[2museNotifications[2m > [22m[2mreturns loading state initially
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/vanenkhuizen/Documents/GitHub/eryxon-flow/node_modules/@testing-library/react/dist/pure.js:329:5)

 [32mâœ“[39m src/lib/scheduler.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 9[2mms[22m[39m

<--- Last few GCs --->

[31504:0x79f80c000]   207779 ms: Mark-Compact 4027.5 (4128.2) -> 4011.9 (4128.5) MB, pooled: 6 MB, 886.58 / 0.00 ms  (average mu = 0.059, current mu = 0.009) allocation failure; scavenge might not succeed
[31504:0x79f80c000]   208687 ms: Mark-Compact 4027.8 (4128.5) -> 4012.2 (4128.8) MB, pooled: 5 MB, 899.62 / 0.00 ms  (average mu = 0.035, current mu = 0.009) allocation failure; scavenge might not succeed


<--- JS stacktrace --->

FATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory
----- Native stack trace -----

 1: 0x1044bb51c node::OOMErrorHandler(char const*, v8::OOMDetails const&) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
 2: 0x1046587a0 v8::internal::V8::FatalProcessOutOfMemory(v8::internal::Isolate*, char const*, v8::OOMDetails const&) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
 3: 0x1047f82b4 v8::internal::Heap::CallGCPrologueCallbacks(v8::GCType, v8::GCCallbackFlags, v8::internal::GCTracer::Scope::ScopeId) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
 4: 0x104802914 v8::internal::Heap::CollectGarbage(v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags)::$_1::operator()() const [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
 5: 0x1047f85e8 void heap::base::Stack::SetMarkerAndCallbackImpl<v8::internal::Heap::CollectGarbage(v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags)::$_1>(heap::base::Stack*, void*, void const*) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
 6: 0x1043d4028 PushAllRegistersAndIterateStack [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
 7: 0x1047f5c18 v8::internal::Heap::CollectGarbage(v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
 8: 0x1047ee518 v8::internal::HeapAllocator::AllocateRawWithRetryOrFailSlowPath(int, v8::internal::AllocationType, v8::internal::AllocationOrigin, v8::internal::AllocationAlignment) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
 9: 0x1047e1610 v8::internal::Factory::NewFillerObject(int, v8::internal::AllocationAlignment, v8::internal::AllocationType, v8::internal::AllocationOrigin) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
10: 0x104a914b0 v8::internal::Runtime_AllocateInYoungGeneration(int, unsigned long*, v8::internal::Isolate*) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
11: 0x1042b5af4 Builtins_CEntry_Return1_ArgvOnStack_NoBuiltinExit [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
12: 0x10421e344 Builtins_FastNewObject [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
13: 0x10421dc98 Builtins_JSConstructStubGeneric [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
14: 0x110ad4700 
15: 0x110af46b4 
16: 0x110af9430 
17: 0x110bedb58 
18: 0x110b63c98 
19: 0x110aec7a4 
20: 0x110b8effc 
21: 0x110b8df9c 
22: 0x110b8fe88 
23: 0x104220ef0 Builtins_InterpreterEntryTrampoline [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
24: 0x110b6c484 
25: 0x110b90484 
26: 0x110b3a948 
27: 0x1043263a0 Builtins_PromiseConstructor [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
28: 0x10421dfbc Builtins_JSBuiltinsConstructStub [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
29: 0x110b3af4c 
30: 0x110b90194 
31: 0x110a1788c 
32: 0x110a70c78 
33: 0x110a2c200 
34: 0x10425d290 Builtins_AsyncFunctionAwaitResolveClosure [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
35: 0x1043284d8 Builtins_PromiseFulfillReactionJob [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
36: 0x10424d594 Builtins_RunMicrotasks [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
37: 0x10421eaf4 Builtins_JSRunMicrotasksEntry [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
38: 0x1047769b0 v8::internal::(anonymous namespace)::Invoke(v8::internal::Isolate*, v8::internal::(anonymous namespace)::InvokeParams const&) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
39: 0x104777124 v8::internal::(anonymous namespace)::InvokeWithTryCatch(v8::internal::Isolate*, v8::internal::(anonymous namespace)::InvokeParams const&) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
40: 0x10479ca8c v8::internal::MicrotaskQueue::PerformCheckpointInternal(v8::Isolate*) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
41: 0x1043d55e4 node::InternalCallbackScope::Close() [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
42: 0x1043d5444 node::InternalCallbackScope::~InternalCallbackScope() [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
43: 0x104455b30 node::Environment::RunTimers(uv_timer_s*) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
44: 0x1078bb7d4 uv__run_timers [/opt/homebrew/Cellar/libuv/1.51.0/lib/libuv.1.dylib]
45: 0x1078becc0 uv_run [/opt/homebrew/Cellar/libuv/1.51.0/lib/libuv.1.dylib]
46: 0x1043d6414 node::SpinEventLoopInternal(node::Environment*) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
47: 0x104503944 node::NodeMainInstance::Run(node::ExitCode*, node::Environment*) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
48: 0x104503698 node::NodeMainInstance::Run() [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
49: 0x10447aa68 node::Start(int, char**) [/opt/homebrew/Cellar/node@22/22.18.0/bin/node]
50: 0x191f85d54 start [/usr/lib/dyld]

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 35 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/hooks/useJobIssues.test.ts[2m > [22museJobIssues[2m > [22mfetches issue summary for job
[41m[1m FAIL [22m[49m src/hooks/useJobIssues.test.ts[2m > [22museJobIssues[2m > [22mcalls RPC with correct parameters
[41m[1m FAIL [22m[49m src/hooks/useJobIssues.test.ts[2m > [22museJobIssues[2m > [22mhandles empty data response
[41m[1m FAIL [22m[49m src/hooks/useJobIssues.test.ts[2m > [22museJobIssues[2m > [22mhandles error response
[41m[1m FAIL [22m[49m src/hooks/useJobIssues.test.ts[2m > [22museJobIssues[2m > [22mconverts string counts to numbers
[41m[1m FAIL [22m[49m src/hooks/useJobIssues.test.ts[2m > [22museJobIssues[2m > [22mhandles all severity levels
[41m[1m FAIL [22m[49m src/hooks/useJobIssues.test.ts[2m > [22museJobIssues[2m > [22mhandles null severity gracefully
[31m[1mTypeError[22m: __vite_ssr_import_1__.supabase.removeChannel is not a function[39m
[36m [2mâ¯[22m src/hooks/useJobIssues.ts:[2m80:16[22m[39m
    [90m 78| [39m
    [90m 79| [39m    [35mreturn[39m () [33m=>[39m {
    [90m 80| [39m      supabase[33m.[39m[34mremoveChannel[39m(channel)[33m;[39m
    [90m   | [39m               [31m^[39m
    [90m 81| [39m    }[33m;[39m
    [90m 82| [39m  }[33m,[39m [jobId])[33m;[39m
[90m [2mâ¯[22m safelyCallDestroy node_modules/react-dom/cjs/react-dom.development.js:[2m22971:5[22m[39m
[90m [2mâ¯[22m commitHookEffectListUnmount node_modules/react-dom/cjs/react-dom.development.js:[2m23139:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountInsideDeletedTreeOnFiber node_modules/react-dom/cjs/react-dom.development.js:[2m25140:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffectsInsideOfDeletedTree_begin node_modules/react-dom/cjs/react-dom.development.js:[2m25087:5[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects_begin node_modules/react-dom/cjs/react-dom.development.js:[2m24995:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects node_modules/react-dom/cjs/react-dom.development.js:[2m24980:3[22m[39m
[90m [2mâ¯[22m flushPassiveEffectsImpl node_modules/react-dom/cjs/react-dom.development.js:[2m27077:3[22m[39m
[90m [2mâ¯[22m flushPassiveEffects node_modules/react-dom/cjs/react-dom.development.js:[2m27023:14[22m[39m
[90m [2mâ¯[22m commitRootImpl node_modules/react-dom/cjs/react-dom.development.js:[2m26974:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useJobIssues.test.ts[2m > [22museJobIssues[2m > [22mrefetches when jobId changes
[31m[1mTypeError[22m: __vite_ssr_import_1__.supabase.removeChannel is not a function[39m
[36m [2mâ¯[22m src/hooks/useJobIssues.ts:[2m80:16[22m[39m
    [90m 78| [39m
    [90m 79| [39m    [35mreturn[39m () [33m=>[39m {
    [90m 80| [39m      supabase[33m.[39m[34mremoveChannel[39m(channel)[33m;[39m
    [90m   | [39m               [31m^[39m
    [90m 81| [39m    }[33m;[39m
    [90m 82| [39m  }[33m,[39m [jobId])[33m;[39m
[90m [2mâ¯[22m safelyCallDestroy node_modules/react-dom/cjs/react-dom.development.js:[2m22971:5[22m[39m
[90m [2mâ¯[22m commitHookEffectListUnmount node_modules/react-dom/cjs/react-dom.development.js:[2m23139:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountOnFiber node_modules/react-dom/cjs/react-dom.development.js:[2m25073:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects_complete node_modules/react-dom/cjs/react-dom.development.js:[2m25046:7[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects_begin node_modules/react-dom/cjs/react-dom.development.js:[2m25035:7[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects node_modules/react-dom/cjs/react-dom.development.js:[2m24980:3[22m[39m
[90m [2mâ¯[22m flushPassiveEffectsImpl node_modules/react-dom/cjs/react-dom.development.js:[2m27077:3[22m[39m
[90m [2mâ¯[22m flushPassiveEffects node_modules/react-dom/cjs/react-dom.development.js:[2m27023:14[22m[39m
[90m [2mâ¯[22m node_modules/react-dom/cjs/react-dom.development.js:[2m26808:9[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useJobIssues.test.ts[2m > [22museJobIssues[2m > [22mrefetches when jobId changes
[31m[1mTypeError[22m: __vite_ssr_import_1__.supabase.removeChannel is not a function[39m
[36m [2mâ¯[22m src/hooks/useJobIssues.ts:[2m80:16[22m[39m
    [90m 78| [39m
    [90m 79| [39m    [35mreturn[39m () [33m=>[39m {
    [90m 80| [39m      supabase[33m.[39m[34mremoveChannel[39m(channel)[33m;[39m
    [90m   | [39m               [31m^[39m
    [90m 81| [39m    }[33m;[39m
    [90m 82| [39m  }[33m,[39m [jobId])[33m;[39m
[90m [2mâ¯[22m safelyCallDestroy node_modules/react-dom/cjs/react-dom.development.js:[2m22971:5[22m[39m
[90m [2mâ¯[22m commitHookEffectListUnmount node_modules/react-dom/cjs/react-dom.development.js:[2m23139:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountInsideDeletedTreeOnFiber node_modules/react-dom/cjs/react-dom.development.js:[2m25140:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffectsInsideOfDeletedTree_begin node_modules/react-dom/cjs/react-dom.development.js:[2m25087:5[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects_begin node_modules/react-dom/cjs/react-dom.development.js:[2m24995:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects node_modules/react-dom/cjs/react-dom.development.js:[2m24980:3[22m[39m
[90m [2mâ¯[22m flushPassiveEffectsImpl node_modules/react-dom/cjs/react-dom.development.js:[2m27077:3[22m[39m
[90m [2mâ¯[22m flushPassiveEffects node_modules/react-dom/cjs/react-dom.development.js:[2m27023:14[22m[39m
[90m [2mâ¯[22m performConcurrentWorkOnRoot node_modules/react-dom/cjs/react-dom.development.js:[2m25748:32[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useNotifications.test.ts[2m > [22museNotifications[2m > [22mfetches notifications on mount
[31m[1mAssertionError[22m: expected true to be false // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2mâ¯[22m src/hooks/useNotifications.test.ts:[2m98:38[22m[39m
    [90m 96| [39m
    [90m 97| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m 98| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39mloading)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m 99| [39m    })[33m;[39m
    [90m100| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useNotifications.test.ts[2m > [22museNotifications[2m > [22mcalculates unread count correctly
[31m[1mAssertionError[22m: expected true to be false // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2mâ¯[22m src/hooks/useNotifications.test.ts:[2m108:38[22m[39m
    [90m106| [39m
    [90m107| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m108| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39mloading)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m109| [39m    })[33m;[39m
    [90m110| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useNotifications.test.ts[2m > [22museNotifications[2m > [22mseparates pinned and unpinned notifications
[31m[1mAssertionError[22m: expected true to be false // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2mâ¯[22m src/hooks/useNotifications.test.ts:[2m119:38[22m[39m
    [90m117| [39m
    [90m118| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m119| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39mloading)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m120| [39m    })[33m;[39m
    [90m121| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useNotifications.test.ts[2m > [22museNotifications[2m > [22mmarkAsRead calls RPC with correct params
[31m[1mAssertionError[22m: expected true to be false // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2mâ¯[22m src/hooks/useNotifications.test.ts:[2m134:38[22m[39m
    [90m132| [39m
    [90m133| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m134| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39mloading)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m135| [39m    })[33m;[39m
    [90m136| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useNotifications.test.ts[2m > [22museNotifications[2m > [22mtogglePin calls RPC with correct params
[31m[1mAssertionError[22m: expected true to be false // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2mâ¯[22m src/hooks/useNotifications.test.ts:[2m152:38[22m[39m
    [90m150| [39m
    [90m151| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m152| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39mloading)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m153| [39m    })[33m;[39m
    [90m154| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useNotifications.test.ts[2m > [22museNotifications[2m > [22mdismiss calls RPC with correct params
[31m[1mAssertionError[22m: expected true to be false // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2mâ¯[22m src/hooks/useNotifications.test.ts:[2m170:38[22m[39m
    [90m168| [39m
    [90m169| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m170| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39mloading)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m171| [39m    })[33m;[39m
    [90m172| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useNotifications.test.ts[2m > [22museNotifications[2m > [22mmarkAllAsRead calls RPC
[31m[1mAssertionError[22m: expected true to be false // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2mâ¯[22m src/hooks/useNotifications.test.ts:[2m188:38[22m[39m
    [90m186| [39m
    [90m187| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m188| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39mloading)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m189| [39m    })[33m;[39m
    [90m190| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useNotifications.test.ts[2m > [22museNotifications[2m > [22mrefetch triggers new fetch
[31m[1mAssertionError[22m: expected true to be false // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2mâ¯[22m src/hooks/useNotifications.test.ts:[2m202:38[22m[39m
    [90m200| [39m
    [90m201| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m202| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39mloading)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m203| [39m    })[33m;[39m
    [90m204| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useNotifications.test.ts[2m > [22museNotifications[2m > [22mhandles error in markAsRead
[31m[1mAssertionError[22m: expected true to be false // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2mâ¯[22m src/hooks/useNotifications.test.ts:[2m219:38[22m[39m
    [90m217| [39m
    [90m218| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m219| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39mloading)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m220| [39m    })[33m;[39m
    [90m221| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useNotifications.test.ts[2m > [22museNotifications[2m > [22mhandles error in togglePin
[31m[1mAssertionError[22m: expected true to be false // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2mâ¯[22m src/hooks/useNotifications.test.ts:[2m237:38[22m[39m
    [90m235| [39m
    [90m236| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m237| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39mloading)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m238| [39m    })[33m;[39m
    [90m239| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/useNotifications.test.ts[2m > [22museNotifications[2m > [22mhandles error in dismiss
[31m[1mAssertionError[22m: expected true to be false // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div />[31m
  [36m</body>[31m
[36m</html>[31m[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2mâ¯[22m src/hooks/useNotifications.test.ts:[2m255:38[22m[39m
    [90m253| [39m
    [90m254| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m255| [39m      [34mexpect[39m(result[33m.[39mcurrent[33m.[39mloading)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m256| [39m    })[33m;[39m
    [90m257| [39m
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/usePartIssues.test.ts[2m > [22musePartIssues[2m > [22mfetches issue summary for part
[41m[1m FAIL [22m[49m src/hooks/usePartIssues.test.ts[2m > [22musePartIssues[2m > [22mcalls RPC with correct parameters
[41m[1m FAIL [22m[49m src/hooks/usePartIssues.test.ts[2m > [22musePartIssues[2m > [22mhandles empty data response
[41m[1m FAIL [22m[49m src/hooks/usePartIssues.test.ts[2m > [22musePartIssues[2m > [22mhandles error response
[41m[1m FAIL [22m[49m src/hooks/usePartIssues.test.ts[2m > [22musePartIssues[2m > [22mconverts string counts to numbers
[31m[1mTypeError[22m: __vite_ssr_import_1__.supabase.removeChannel is not a function[39m
[36m [2mâ¯[22m src/hooks/usePartIssues.ts:[2m80:16[22m[39m
    [90m 78| [39m
    [90m 79| [39m    [35mreturn[39m () [33m=>[39m {
    [90m 80| [39m      supabase[33m.[39m[34mremoveChannel[39m(channel)[33m;[39m
    [90m   | [39m               [31m^[39m
    [90m 81| [39m    }[33m;[39m
    [90m 82| [39m  }[33m,[39m [partId])[33m;[39m
[90m [2mâ¯[22m safelyCallDestroy node_modules/react-dom/cjs/react-dom.development.js:[2m22971:5[22m[39m
[90m [2mâ¯[22m commitHookEffectListUnmount node_modules/react-dom/cjs/react-dom.development.js:[2m23139:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountInsideDeletedTreeOnFiber node_modules/react-dom/cjs/react-dom.development.js:[2m25140:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffectsInsideOfDeletedTree_begin node_modules/react-dom/cjs/react-dom.development.js:[2m25087:5[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects_begin node_modules/react-dom/cjs/react-dom.development.js:[2m24995:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects node_modules/react-dom/cjs/react-dom.development.js:[2m24980:3[22m[39m
[90m [2mâ¯[22m flushPassiveEffectsImpl node_modules/react-dom/cjs/react-dom.development.js:[2m27077:3[22m[39m
[90m [2mâ¯[22m flushPassiveEffects node_modules/react-dom/cjs/react-dom.development.js:[2m27023:14[22m[39m
[90m [2mâ¯[22m commitRootImpl node_modules/react-dom/cjs/react-dom.development.js:[2m26974:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/usePartIssues.test.ts[2m > [22musePartIssues[2m > [22mrefetches when partId changes
[31m[1mTypeError[22m: __vite_ssr_import_1__.supabase.removeChannel is not a function[39m
[36m [2mâ¯[22m src/hooks/usePartIssues.ts:[2m80:16[22m[39m
    [90m 78| [39m
    [90m 79| [39m    [35mreturn[39m () [33m=>[39m {
    [90m 80| [39m      supabase[33m.[39m[34mremoveChannel[39m(channel)[33m;[39m
    [90m   | [39m               [31m^[39m
    [90m 81| [39m    }[33m;[39m
    [90m 82| [39m  }[33m,[39m [partId])[33m;[39m
[90m [2mâ¯[22m safelyCallDestroy node_modules/react-dom/cjs/react-dom.development.js:[2m22971:5[22m[39m
[90m [2mâ¯[22m commitHookEffectListUnmount node_modules/react-dom/cjs/react-dom.development.js:[2m23139:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountOnFiber node_modules/react-dom/cjs/react-dom.development.js:[2m25073:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects_complete node_modules/react-dom/cjs/react-dom.development.js:[2m25046:7[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects_begin node_modules/react-dom/cjs/react-dom.development.js:[2m25035:7[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects node_modules/react-dom/cjs/react-dom.development.js:[2m24980:3[22m[39m
[90m [2mâ¯[22m flushPassiveEffectsImpl node_modules/react-dom/cjs/react-dom.development.js:[2m27077:3[22m[39m
[90m [2mâ¯[22m flushPassiveEffects node_modules/react-dom/cjs/react-dom.development.js:[2m27023:14[22m[39m
[90m [2mâ¯[22m node_modules/react-dom/cjs/react-dom.development.js:[2m26808:9[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/usePartIssues.test.ts[2m > [22musePartIssues[2m > [22mrefetches when partId changes
[31m[1mTypeError[22m: __vite_ssr_import_1__.supabase.removeChannel is not a function[39m
[36m [2mâ¯[22m src/hooks/usePartIssues.ts:[2m80:16[22m[39m
    [90m 78| [39m
    [90m 79| [39m    [35mreturn[39m () [33m=>[39m {
    [90m 80| [39m      supabase[33m.[39m[34mremoveChannel[39m(channel)[33m;[39m
    [90m   | [39m               [31m^[39m
    [90m 81| [39m    }[33m;[39m
    [90m 82| [39m  }[33m,[39m [partId])[33m;[39m
[90m [2mâ¯[22m safelyCallDestroy node_modules/react-dom/cjs/react-dom.development.js:[2m22971:5[22m[39m
[90m [2mâ¯[22m commitHookEffectListUnmount node_modules/react-dom/cjs/react-dom.development.js:[2m23139:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountInsideDeletedTreeOnFiber node_modules/react-dom/cjs/react-dom.development.js:[2m25140:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffectsInsideOfDeletedTree_begin node_modules/react-dom/cjs/react-dom.development.js:[2m25087:5[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects_begin node_modules/react-dom/cjs/react-dom.development.js:[2m24995:11[22m[39m
[90m [2mâ¯[22m commitPassiveUnmountEffects node_modules/react-dom/cjs/react-dom.development.js:[2m24980:3[22m[39m
[90m [2mâ¯[22m flushPassiveEffectsImpl node_modules/react-dom/cjs/react-dom.development.js:[2m27077:3[22m[39m
[90m [2mâ¯[22m flushPassiveEffects node_modules/react-dom/cjs/react-dom.development.js:[2m27023:14[22m[39m
[90m [2mâ¯[22m performConcurrentWorkOnRoot node_modules/react-dom/cjs/react-dom.development.js:[2m25748:32[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/hooks/usePendingIssuesCount.test.tsx[2m > [22musePendingIssuesCount[2m > [22mqueries with correct parameters
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ '*', { count: 'exact', head: true } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   "*",[90m
[31m+   "id",[90m
[2m    {[22m
[2m      "count": "exact",[22m
[2m      "head": true,[22m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m src/hooks/usePendingIssuesCount.test.tsx:[2m135:24[22m[39m
    [90m133| [39m    })[33m;[39m
    [90m134| [39m
    [90m135| [39m    expect(mockSelect).toHaveBeenCalledWith('*', { count: 'exact', heaâ€¦
    [90m   | [39m                       [31m^[39m
    [90m136| [39m    [34mexpect[39m(eqMock)[33m.[39m[34mtoHaveBeenCalledWith[39m([32m'status'[39m[33m,[39m [32m'pending'[39m)[33m;[39m
    [90m137| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/37]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/lib/searchService.test.ts[2m > [22msearchService - Search Functions[2m > [22msearchJobsFullText[2m > [22mreturns empty array for empty query
[41m[1m FAIL [22m[49m src/lib/searchService.test.ts[2m > [22msearchService - Search Functions[2m > [22msearchJobsFullText[2m > [22mreturns empty array for whitespace query
[41m[1m FAIL [22m[49m src/lib/searchService.test.ts[2m > [22msearchService - Search Functions[2m > [22msearchPartsFullText[2m > [22mreturns empty array for empty query
[41m[1m FAIL [22m[49m src/lib/searchService.test.ts[2m > [22msearchService - Search Functions[2m > [22msearchOperationsFullText[2m > [22mreturns empty array for empty query
[41m[1m FAIL [22m[49m src/lib/searchService.test.ts[2m > [22msearchService - Search Functions[2m > [22msearchUsersFullText[2m > [22mreturns empty array for empty query
[41m[1m FAIL [22m[49m src/lib/searchService.test.ts[2m > [22msearchService - Search Functions[2m > [22msearchIssuesFullText[2m > [22mreturns empty array for empty query
[41m[1m FAIL [22m[49m src/lib/searchService.test.ts[2m > [22msearchService - Search Functions[2m > [22msearchAll[2m > [22mreturns empty array for empty query
[41m[1m FAIL [22m[49m src/lib/searchService.test.ts[2m > [22msearchService - Search Functions[2m > [22msearchAll[2m > [22mreturns empty array for empty tenantId
[41m[1m FAIL [22m[49m src/lib/searchService.test.ts[2m > [22msearchService - Search Functions[2m > [22msearchAll[2m > [22mreturns empty array for whitespace query
[31m[1mError[22m: Missing VITE_SUPABASE_URL or VITE_SUPABASE_PUBLISHABLE_KEY environment variables. Please check your .env file.[39m
[36m [2mâ¯[22m src/integrations/supabase/client.ts:[2m9:9[22m[39m
    [90m  7| [39m
    [90m  8| [39m[35mif[39m ([33m![39m[33mSUPABASE_URL[39m [33m||[39m [33m![39m[33mSUPABASE_PUBLISHABLE_KEY[39m) {
    [90m  9| [39m  throw new Error('Missing VITE_SUPABASE_URL or VITE_SUPABASE_PUBLISHAâ€¦
    [90m   | [39m        [31m^[39m
    [90m 10| [39m}
    [90m 11| [39m
[90m [2mâ¯[22m src/lib/searchService.ts:[2m15:1[22m[39m
[90m [2mâ¯[22m src/lib/searchService.test.ts:[2m90:38[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/37]âŽ¯[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Unhandled Errors [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1m
Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Unhandled Error [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1mError[22m: [vitest-pool]: Worker forks emitted error.[39m
[90m [2mâ¯[22m EventEmitter.<anonymous> node_modules/vitest/dist/chunks/cli-api.C7sYjHmQ.js:[2m8010:22[22m[39m
[90m [2mâ¯[22m EventEmitter.emit node:events:[2m518:28[22m[39m
[90m [2mâ¯[22m ChildProcess.emitUnexpectedExit node_modules/vitest/dist/chunks/cli-api.C7sYjHmQ.js:[2m7583:22[22m[39m
[90m [2mâ¯[22m ChildProcess.emit node:events:[2m518:28[22m[39m
[90m [2mâ¯[22m Process.ChildProcess._handle.onexit node:internal/child_process:[2m293:12[22m[39m

[31m[1mCaused by: Error[22m: Worker exited unexpectedly[39m
[90m [2mâ¯[22m ChildProcess.emitUnexpectedExit node_modules/vitest/dist/chunks/cli-api.C7sYjHmQ.js:[2m7582:33[22m[39m
[90m [2mâ¯[22m ChildProcess.emit node:events:[2m518:28[22m[39m
[90m [2mâ¯[22m Process.ChildProcess._handle.onexit node:internal/child_process:[2m293:12[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m


[2m Test Files [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m26 passed[39m[22m[90m (31)[39m
[2m      Tests [22m [1m[31m35 failed[39m[22m[2m | [22m[1m[32m483 passed[39m[22m[90m (519)[39m
[2m     Errors [22m [1m[31m1 error[39m[22m
[2m   Start at [22m 16:26:00
[2m   Duration [22m 210.79s[2m (transform 1.01s, setup 1.70s, import 4.57s, tests 5.89s, environment 12.24s)[22m

