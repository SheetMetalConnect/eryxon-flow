---
interface Props {
  title: string;
  description: string;
  icon: string;
  size?: 'small' | 'medium' | 'large';
  accent?: boolean;
}

const {
  title,
  description,
  icon,
  size = 'medium',
  accent = false,
} = Astro.props;

const sizeClasses = {
  small: 'col-span-1 row-span-1',
  medium: 'col-span-2 row-span-1 md:col-span-1',
  large: 'col-span-2 row-span-2'
};

// Icon mapping
const icons: Record<string, string> = {
  'clipboard-list': `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>`,
  'gauge': `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 14 4-4"/><path d="M3.34 19a10 10 0 1 1 17.32 0"/></svg>`,
  'monitor': `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="3" rx="2"/><line x1="8" x2="16" y1="21" y2="21"/><line x1="12" x2="12" y1="17" y2="21"/></svg>`,
  'clock': `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`,
  'cube': `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></svg>`,
  'alert-triangle': `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" x2="12" y1="9" y2="13"/><line x1="12" x2="12.01" y1="17" y2="17"/></svg>`,
  'globe': `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>`,
  'moon': `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>`,
  'plug': `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22v-5"/><path d="M9 8V2"/><path d="M15 8V2"/><path d="M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z"/></svg>`,
  'building': `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="16" height="20" x="4" y="2" rx="2" ry="2"/><path d="M9 22v-4h6v4"/><path d="M8 6h.01"/><path d="M16 6h.01"/><path d="M12 6h.01"/><path d="M12 10h.01"/><path d="M12 14h.01"/><path d="M16 10h.01"/><path d="M16 14h.01"/><path d="M8 10h.01"/><path d="M8 14h.01"/></svg>`,
};

const iconSvg = icons[icon] || icons['clipboard-list'];

const cardClasses = `
  ${sizeClasses[size]}
  group
  relative
  overflow-hidden
  rounded-2xl
  border
  border-border/50
  bg-card/50
  backdrop-blur-xl
  p-6
  transition-all
  duration-500
  hover:border-accent/50
  hover:shadow-2xl
  hover:shadow-accent/20
  hover:scale-[1.02]
  fade-in-on-scroll
`;
---

<div class={cardClasses}>
  <!-- Gradient overlay on hover -->
  <div class="absolute inset-0 bg-gradient-to-br from-accent/10 to-accent-2/10 opacity-0 transition-opacity duration-500 group-hover:opacity-100" />

  <!-- Glow effect for accent cards -->
  {accent && (
    <div class="absolute inset-0 bg-gradient-to-br from-accent/20 to-accent-2/20 opacity-50 animate-pulse" />
  )}

  <!-- Content -->
  <div class="relative z-10 h-full flex flex-col">
    <!-- Icon and title -->
    <div class="flex items-start gap-4 mb-4">
      <div class="text-accent transform transition-transform duration-300 group-hover:scale-110 group-hover:rotate-3" set:html={iconSvg} />
      <div class="flex-1">
        <h3 class="text-xl font-semibold text-foreground mb-2 group-hover:text-accent transition-colors duration-300">
          {title}
        </h3>
        <p class="text-muted-foreground leading-relaxed">
          {description}
        </p>
      </div>
    </div>

    <!-- Floating particles for visual interest -->
    <div class="absolute top-4 right-4 w-2 h-2 bg-accent/30 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-pulse" style="animation-delay: 0.5s;" />
    <div class="absolute bottom-8 left-8 w-1 h-1 bg-accent-2/30 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-pulse" style="animation-delay: 1s;" />
  </div>

  <!-- Border glow effect -->
  <div class="absolute inset-0 rounded-2xl border border-accent/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none" />
</div>

<style>
  /* Custom hover animations */
  @media (min-width: 768px) {
    .bento-item-large:hover {
      transform: scale(1.02) translateY(-4px);
    }

    .bento-item-medium:hover {
      transform: scale(1.03) translateY(-2px);
    }

    .bento-item-small:hover {
      transform: scale(1.05) translateY(-1px);
    }
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .col-span-2 {
      grid-column: span 1;
    }

    .row-span-2 {
      grid-row: span 1;
    }
  }
</style>
